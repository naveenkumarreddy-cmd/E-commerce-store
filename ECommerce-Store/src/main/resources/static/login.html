<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Login | E-Commerce</title>
  <link rel="stylesheet" href="css/auth.css">
</head>

<body>

  <div class="bg"></div>

  <!-- ðŸŒŸ APP TITLE ON TOP -->
  <header class="app-title">
    <h1 class="animated-title">E-Commerce Store</h1>
    <p class="subtitle">Shop Smart Â· Shop Easy</p>
  </header>

  <!-- ðŸŒŸ CENTERED LOGIN CARD -->
  <div class="auth-wrapper">

    <div class="auth-card">

      <!-- HEADING -->
      <h2 class="title black">Welcome Back ðŸ‘‹</h2>

      <!-- LOGIN -->
      <form id="loginForm" class="form">
        <input id="email" type="email" placeholder="Email" required>
        <input id="password" type="password" placeholder="Password" required>
        <div id="error" class="error"></div>
        

        <div class="tabs">
          <button id="loginTab" class="active" onclick="showLogin()">Login</button>
          <button id="registerTab" onclick="showRegister()">Register</button>
        </div>
      </form>

      <!-- REGISTER -->
      <form id="registerForm" class="form hidden">
        <input id="rname" type="text" placeholder="Full Name" required>
        <input id="remail" type="email" placeholder="Email" required>
        <input id="rpassword" type="password" placeholder="Password" required>
        <button type="button" class="primary" onclick="register()">Register</button>
      </form>

    </div>

  </div>


  <script src="js/login.js"></script>

  <script>
    const loginTab = document.getElementById("loginTab");
    const registerTab = document.getElementById("registerTab");

    function showLogin() {
      document.getElementById("loginForm").classList.remove("hidden");
      document.getElementById("registerForm").classList.add("hidden");
      loginTab.classList.add("active");
      registerTab.classList.remove("active");
      document.querySelector(".title").innerText = "Welcome Back ðŸ‘‹";
    }

    function showRegister() {
      document.getElementById("registerForm").classList.remove("hidden");
      document.getElementById("loginForm").classList.add("hidden");
      registerTab.classList.add("active");
      loginTab.classList.remove("active");
      document.querySelector(".title").innerText = "Create Account âœ¨";
    }

    async function register() {

      const name = document.getElementById("rname").value.trim();
      const email = document.getElementById("remail").value.trim();
      const password = document.getElementById("rpassword").value.trim();

      if (!name || !email || !password) {
        alert("Fill all details");
        return;
      }

      try {
        const res = await fetch("http://localhost:8080/api/auth/register", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ name, email, password })
        });

        if (!res.ok) {
          alert("Registration failed");
          return;
        }

        alert("Account created. Please login.");
        showLogin();

      } catch (e) {
        alert("Server error");
      }
    }
  </script>

</body>
</html>
